@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Literata:ital,opsz,wght@0,7..72,400;0,7..72,500;0,7..72,600;0,7..72,700;1,7..72,400;1,7..72,500&family=DM+Sans:ital,opsz,wght@0,9..40,300;0,9..40,400;0,9..40,500;0,9..40,600;1,9..40,400&display=swap');

@layer base {
  :root {
    --radius: 1rem;

    /* AbilityLearn Palette — Jade Teal + Warm Amber, Light Mode */
    /* Primary: Deep jade teal */
    --primary: 0.48 0.12 185;
    --primary-foreground: 0.98 0 0;

    /* Secondary: Warm amber accent */
    --secondary: 0.82 0.12 75;
    --secondary-foreground: 0.15 0.05 30;

    /* Backgrounds */
    --background: 0.97 0.008 185;
    --foreground: 0.18 0.04 185;

    /* Cards — very slightly tinted */
    --card: 0.995 0.003 185;
    --card-foreground: 0.18 0.04 185;

    /* Popover */
    --popover: 0.995 0.003 185;
    --popover-foreground: 0.18 0.04 185;

    /* Muted tones */
    --muted: 0.92 0.015 185;
    --muted-foreground: 0.42 0.04 185;

    /* Accent: warm sand */
    --accent: 0.93 0.03 75;
    --accent-foreground: 0.25 0.06 75;

    /* Destructive */
    --destructive: 0.55 0.22 27;
    --destructive-foreground: 0.98 0 0;

    /* Success: bright teal */
    --success: 0.62 0.14 185;
    --success-foreground: 0.98 0 0;

    /* Warning: amber */
    --warning: 0.75 0.16 75;
    --warning-foreground: 0.15 0.05 30;

    /* Borders & inputs */
    --border: 0.86 0.025 185;
    --input: 0.86 0.025 185;
    --ring: 0.48 0.12 185;

    /* Charts */
    --chart-1: 0.48 0.12 185;
    --chart-2: 0.75 0.16 75;
    --chart-3: 0.62 0.10 145;
    --chart-4: 0.55 0.14 230;
    --chart-5: 0.65 0.12 340;

    /* Sidebar */
    --sidebar: 0.18 0.06 185;
    --sidebar-foreground: 0.95 0.01 185;
    --sidebar-primary: 0.62 0.14 185;
    --sidebar-primary-foreground: 0.98 0 0;
    --sidebar-accent: 0.28 0.06 185;
    --sidebar-accent-foreground: 0.95 0.01 185;
    --sidebar-border: 0.28 0.06 185;
    --sidebar-ring: 0.62 0.14 185;
  }

  .dark {
    --background: 0.12 0.03 185;
    --foreground: 0.92 0.015 185;

    --card: 0.18 0.04 185;
    --card-foreground: 0.92 0.015 185;

    --popover: 0.22 0.04 185;
    --popover-foreground: 0.92 0.015 185;

    --primary: 0.65 0.14 185;
    --primary-foreground: 0.12 0.03 185;

    --secondary: 0.72 0.10 75;
    --secondary-foreground: 0.12 0.02 30;

    --muted: 0.25 0.04 185;
    --muted-foreground: 0.62 0.04 185;

    --accent: 0.30 0.06 75;
    --accent-foreground: 0.88 0.04 75;

    --destructive: 0.65 0.22 27;
    --destructive-foreground: 0.98 0 0;

    --success: 0.58 0.13 185;
    --success-foreground: 0.12 0.03 185;

    --warning: 0.70 0.15 75;
    --warning-foreground: 0.12 0.02 30;

    --border: 0.28 0.05 185;
    --input: 0.28 0.05 185;
    --ring: 0.65 0.14 185;

    --chart-1: 0.65 0.14 185;
    --chart-2: 0.72 0.14 75;
    --chart-3: 0.58 0.10 145;
    --chart-4: 0.58 0.14 230;
    --chart-5: 0.62 0.12 340;

    --sidebar: 0.10 0.03 185;
    --sidebar-foreground: 0.92 0.015 185;
    --sidebar-primary: 0.65 0.14 185;
    --sidebar-primary-foreground: 0.12 0.03 185;
    --sidebar-accent: 0.20 0.04 185;
    --sidebar-accent-foreground: 0.92 0.015 185;
    --sidebar-border: 0.20 0.04 185;
    --sidebar-ring: 0.65 0.14 185;
  }

  /* High contrast mode */
  .high-contrast {
    --background: 1 0 0;
    --foreground: 0 0 0;
    --card: 1 0 0;
    --card-foreground: 0 0 0;
    --primary: 0.20 0.15 185;
    --primary-foreground: 1 0 0;
    --secondary: 0.55 0.18 75;
    --secondary-foreground: 0 0 0;
    --muted: 0.92 0 0;
    --muted-foreground: 0.10 0 0;
    --border: 0.30 0 0;
    --input: 0.30 0 0;
    --ring: 0.20 0.15 185;
    --destructive: 0.40 0.25 27;
    --destructive-foreground: 1 0 0;
  }

  .high-contrast.dark {
    --background: 0 0 0;
    --foreground: 1 0 0;
    --card: 0.06 0 0;
    --card-foreground: 1 0 0;
    --primary: 0.72 0.18 185;
    --primary-foreground: 0 0 0;
    --secondary: 0.85 0.18 75;
    --secondary-foreground: 0 0 0;
    --muted: 0.12 0 0;
    --muted-foreground: 0.85 0 0;
    --border: 0.65 0 0;
    --input: 0.65 0 0;
    --ring: 0.72 0.18 185;
  }

  * {
    @apply border-border;
  }

  html {
    font-size: var(--base-font-size, 18px);
    scroll-behavior: smooth;
  }

  @media (prefers-reduced-motion: reduce) {
    html {
      scroll-behavior: auto;
    }
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'DM Sans', sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  h1, h2, h3 {
    font-family: 'Literata', Georgia, serif;
    line-height: 1.25;
  }
}

/* Skip navigation link */
.skip-link {
  position: absolute;
  top: -100%;
  left: 1rem;
  z-index: 9999;
  padding: 0.75rem 1.5rem;
  background: oklch(var(--primary));
  color: oklch(var(--primary-foreground));
  font-weight: 600;
  border-radius: 0 0 0.75rem 0.75rem;
  text-decoration: none;
  transition: top 0.15s ease;
}

.skip-link:focus {
  top: 0;
  outline: 3px solid oklch(var(--ring));
  outline-offset: 2px;
}

/* Focus ring — visible everywhere */
:focus-visible {
  outline: 3px solid oklch(var(--ring));
  outline-offset: 3px;
  border-radius: 4px;
}

/* Respect reduced-motion preference via class toggle */
.motion-reduce *, .motion-reduce *::before, .motion-reduce *::after {
  animation-duration: 0.01ms !important;
  animation-iteration-count: 1 !important;
  transition-duration: 0.01ms !important;
}

/* Smooth page transitions */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(12px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.page-enter {
  animation: fade-in-up 0.3s ease forwards;
}

@media (prefers-reduced-motion: reduce) {
  .page-enter {
    animation: none;
  }
}

/* Stagger children animation */
@keyframes stagger-in {
  from { opacity: 0; transform: translateY(8px); }
  to   { opacity: 1; transform: translateY(0); }
}

.stagger-child {
  opacity: 0;
  animation: stagger-in 0.35s ease forwards;
}

.stagger-child:nth-child(1) { animation-delay: 0.05s; }
.stagger-child:nth-child(2) { animation-delay: 0.10s; }
.stagger-child:nth-child(3) { animation-delay: 0.15s; }
.stagger-child:nth-child(4) { animation-delay: 0.20s; }
.stagger-child:nth-child(5) { animation-delay: 0.25s; }
.stagger-child:nth-child(6) { animation-delay: 0.30s; }

@media (prefers-reduced-motion: reduce) {
  .stagger-child {
    opacity: 1;
    animation: none;
  }
}

/* Completion celebration pulse */
@keyframes celebrate-pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.04); }
}

.celebrate {
  animation: celebrate-pulse 0.5s ease 2;
}

@media (prefers-reduced-motion: reduce) {
  .celebrate { animation: none; }
}
